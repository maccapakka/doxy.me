---
description: "Project-specific configuration: workspaces, scripts, and design tokens"
alwaysApply: true
---

# Doxy Project Configuration

Project-specific settings for the doxy monorepo. Update this file when adding workspaces, scripts, or tokens.

## Available Workspaces

| Workspace | Name | Location |
|-----------|------|----------|
| Web App | `@doxy/webapp` | `apps/web` |
| Design System | `@doxy/design-system` | `packages/design-system` |
| ESLint Config | `@doxy/eslint-config` | `packages/eslint-config` |
| TypeScript Config | `@doxy/typescript-config` | `packages/typescript-config` |

## Available Scripts

| Script | Description |
|--------|-------------|
| `pnpm dev` | Run dev servers for all apps |
| `pnpm build` | Build all packages and apps |
| `pnpm lint` | Run all linters (JS, CSS, unused) |
| `pnpm lint:js` | Lint JS/TS with ESLint |
| `pnpm lint:js:fix` | Auto-fix ESLint issues |
| `pnpm lint:css` | Lint CSS with Stylelint |
| `pnpm lint:css:fix` | Auto-fix Stylelint issues |
| `pnpm lint:fix` | Run all fixers (JS + CSS) |
| `pnpm lint:unused` | Find unused deps/exports (Knip) |
| `pnpm check-types` | Type-check all packages |
| `pnpm manypkg` | Validate monorepo dependencies |
| `pnpm manypkg:fix` | Auto-fix dependency issues |
| `pnpm sort-package-json` | Sort all package.json files |
| `pnpm storybook` | Run Storybook for design-system |
| `pnpm test` | Run Vitest tests |
| `pnpm generate:component` | Generate new component with PlopJS |

---

## Design Tokens

Tokens are defined in `packages/design-system/src/tokens/` using the `--dxy-` prefix.

### Color Tokens

Colors are defined in oklch format. Each semantic color has 5 programmatically generated variants using `color-mix()`.

**Base Colors:**

| Token | Purpose |
|-------|---------|
| `--dxy-color-primary` | Primary actions, links (Blue) |
| `--dxy-color-secondary` | Secondary elements (Slate) |
| `--dxy-color-accent` | Highlights, accents (Violet) |
| `--dxy-color-warning` | Warning states (Amber) |
| `--dxy-color-positive` | Success states (Green) |
| `--dxy-color-critical` | Error states, destructive actions (Red) |
| `--dxy-color-neutral` | Placeholder, muted backgrounds (Light gray) |
| `--dxy-color-white` | Pure white |
| `--dxy-color-black` | Pure black |

**Color Variant System:**

Each semantic color (primary, secondary, accent, warning, positive, critical, neutral) has 5 variants:

| Variant | Use Case | Formula |
|---------|----------|---------|
| `-subtle` | Very light backgrounds, alert containers, badges | `color-mix(in oklch, {color}, var(--dxy-color-mix-subtle-base) var(--dxy-color-mix-subtle-value))` |
| `-bold` | Darker/saturated version, text on light backgrounds | `color-mix(in oklch, {color}, var(--dxy-color-mix-bold-base) var(--dxy-color-mix-bold-value))` |
| `-hover` | Interactive hover states for buttons/links | `color-mix(in oklch, {color}, var(--dxy-color-mix-hover-base) var(--dxy-color-mix-hover-value))` |
| `-focus` | Focus rings and focus indicators | `color-mix(in oklch, {color}, var(--dxy-color-mix-focus-base) var(--dxy-color-mix-focus-value))` |
| `-active` | Pressed/active states for interactive elements | `color-mix(in oklch, {color}, var(--dxy-color-mix-active-base) var(--dxy-color-mix-active-value))` |

**Configuration Variables:**

| Variable | Value | Purpose |
|----------|-------|---------|
| `--dxy-color-mix-subtle-base` | white | Base color for subtle variants |
| `--dxy-color-mix-subtle-value` | 90% | Mix percentage for subtle variants |
| `--dxy-color-mix-bold-base` | black | Base color for bold variants |
| `--dxy-color-mix-bold-value` | 20% | Mix percentage for bold variants |
| `--dxy-color-mix-hover-base` | black | Base color for hover states |
| `--dxy-color-mix-hover-value` | 12% | Mix percentage for hover states |
| `--dxy-color-mix-focus-base` | black | Base color for focus states |
| `--dxy-color-mix-focus-value` | 5% | Mix percentage for focus states |
| `--dxy-color-mix-active-base` | black | Base color for active states |
| `--dxy-color-mix-active-value` | 25% | Mix percentage for active states |

### Spacing Tokens

Spacing uses a 4px base unit with multipliers from 1x to 12x.

| Token | Value |
|-------|-------|
| `--dxy-spacing-base` | 4px |
| `--dxy-spacing-1x` | 4px |
| `--dxy-spacing-2x` | 8px |
| `--dxy-spacing-3x` | 12px |
| `--dxy-spacing-4x` | 16px |
| `--dxy-spacing-5x` | 20px |
| `--dxy-spacing-6x` | 24px |
| `--dxy-spacing-7x` | 28px |
| `--dxy-spacing-8x` | 32px |
| `--dxy-spacing-9x` | 36px |
| `--dxy-spacing-10x` | 40px |
| `--dxy-spacing-11x` | 44px |
| `--dxy-spacing-12x` | 48px |

### Typography Tokens

Typography uses a 1.2 typescale ratio with body-1 (1.6rem = 16px) as the base. The html font-size is set to 62.5% so 1rem = 10px.

**Configuration Tokens:**

| Token | Purpose | Value |
|-------|---------|-------|
| `--dxy-type-scale` | Typescale ratio | 1.2 |
| `--dxy-type-base` | Base font size | 1.6rem (16px) |
| `--dxy-type-lh-heading` | Heading line-height | 1.1 |
| `--dxy-type-lh-featured` | Featured line-height | 1.3 |
| `--dxy-type-lh-body` | Body line-height | 1.6 |
| `--dxy-type-lh-caption` | Caption line-height | 1.4 |
| `--dxy-type-weight-normal` | Normal weight | 400 |
| `--dxy-type-weight-bold` | Bold weight | 700 |
| `--dxy-type-ls-heading` | Heading letter-spacing | -0.022em |
| `--dxy-type-ff-heading` | Heading font family | Inter, sans-serif |
| `--dxy-type-ff-body` | Body font family | Inter, sans-serif |

**Variant Tokens (each has -size, -lh, -weight; titles also have -ls):**

| Variant | Size | Line-Height | Weight | Letter-Spacing |
|---------|------|-------------|--------|----------------|
| `--dxy-type-title-1-*` | ~4.78rem (48px) | 1.1 | bold | -0.022em |
| `--dxy-type-title-2-*` | ~3.98rem (40px) | 1.1 | bold | -0.022em |
| `--dxy-type-title-3-*` | ~3.32rem (33px) | 1.1 | bold | -0.022em |
| `--dxy-type-featured-1-*` | ~2.76rem (28px) | 1.3 | normal | - |
| `--dxy-type-featured-2-*` | ~2.3rem (23px) | 1.3 | normal | - |
| `--dxy-type-featured-3-*` | ~1.92rem (19px) | 1.3 | normal | - |
| `--dxy-type-body-1-*` | 1.6rem (16px) | 1.6 | normal | - |
| `--dxy-type-body-2-*` | ~1.33rem (13px) | 1.6 | normal | - |
| `--dxy-type-caption-1-*` | ~1.11rem (11px) | 1.4 | normal | - |
| `--dxy-type-caption-2-*` | ~0.93rem (9px) | 1.4 | normal | - |

### Token Files

| File | Contents |
|------|----------|
| `color.css` | Color tokens with base colors, 5 variants per color, and mixing configuration |
| `spacing.css` | Spacing scale tokens |
| `typography.css` | Typography scale and variant tokens |
| `index.css` | Imports all tokens + minimal CSS reset |

---

## Stylelint Configuration

The custom-property-pattern rule allows:
- Standard kebab-case: `--my-var`
- Design tokens: `--dxy-color-primary`
- Private variables: `--_pa`, `--_gap` (for token-based component props)
